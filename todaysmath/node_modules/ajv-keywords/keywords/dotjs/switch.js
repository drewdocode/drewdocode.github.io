module.exports=function(e,r,a){var s=" ",t=e.level,o=e.dataLevel,h=e.schema[r],l=e.schemaPath+e.util.getProperty(r),i=e.errSchemaPath+"/"+r,c=!e.opts.allErrors,v="data"+(o||""),n="valid"+t,d="errs__"+t,m=e.util.copy(e),u="";m.level++;var p,f="valid"+m.level,P="ifPassed"+e.level,E=m.baseId;s+="var "+P+";";var w=h;if(w)for(var y,g=-1,R=w.length-1;g<R;){if(y=w[g+=1],g&&!p&&(s+=" if (!"+P+") { ",u+="}"),y.if&&e.util.schemaHasRules(y.if,e.RULES.all)){s+=" var "+d+" = errors;   ";var S=e.compositeRule;if(e.compositeRule=m.compositeRule=!0,m.createErrors=!1,m.schema=y.if,m.schemaPath=l+"["+g+"].if",m.errSchemaPath=i+"/"+g+"/if",s+="  "+e.validate(m)+" ",m.baseId=E,m.createErrors=!0,e.compositeRule=m.compositeRule=S,s+=" "+P+" = "+f+"; if ("+P+") {  ","boolean"==typeof y.then){if(!1===y.then){var b=b||[];b.push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'switch' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(i)+" , params: { caseIndex: "+g+" } ",!1!==e.opts.messages&&(s+=" , message: 'should pass \"switch\" keyword validation' "),e.opts.verbose&&(s+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),s+=" } "):s+=" {} ";var I=s;s=b.pop(),!e.compositeRule&&c?e.async?s+=" throw new ValidationError(["+I+"]); ":s+=" validate.errors = ["+I+"]; return false; ":s+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}s+=" var "+f+" = "+y.then+"; "}else m.schema=y.then,m.schemaPath=l+"["+g+"].then",m.errSchemaPath=i+"/"+g+"/then",s+="  "+e.validate(m)+" ",m.baseId=E;s+="  } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } } "}else if(s+=" "+P+" = true;  ","boolean"==typeof y.then){if(!1===y.then){var b=b||[];b.push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'switch' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(i)+" , params: { caseIndex: "+g+" } ",!1!==e.opts.messages&&(s+=" , message: 'should pass \"switch\" keyword validation' "),e.opts.verbose&&(s+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),s+=" } "):s+=" {} ";var I=s;s=b.pop(),!e.compositeRule&&c?e.async?s+=" throw new ValidationError(["+I+"]); ":s+=" validate.errors = ["+I+"]; return false; ":s+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}s+=" var "+f+" = "+y.then+"; "}else m.schema=y.then,m.schemaPath=l+"["+g+"].then",m.errSchemaPath=i+"/"+g+"/then",s+="  "+e.validate(m)+" ",m.baseId=E;p=y.continue}return s+=u+"var "+n+" = "+f+"; ",s=e.util.cleanUpCode(s)};