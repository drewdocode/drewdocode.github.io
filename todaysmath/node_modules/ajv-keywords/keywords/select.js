var util=require("./_util");module.exports=function e(t){function r(e,t){var r;return o.some(function(t){if(t.parentSchema===e)return r=t,!0}),r||!1===t||(r={parentSchema:e,cases:{},default:!0},o.push(r)),r}function a(e){return"boolean"==typeof e?e:t.compile(e)}if(!t._opts.$data)return console.warn("keyword select requires $data option"),t;var n=util.metaSchemaRef(t),o=[];return e.definition={validate:function e(t,a,n){if(void 0===n.selectCases)throw new Error('keyword "selectCases" is absent');var o=r(n,!1),i=o.cases[t];if(void 0===i&&(i=o.default),"boolean"==typeof i)return i;var u=i(a);return u||(e.errors=i.errors),u},$data:!0,metaSchema:{type:["string","number","boolean","null"]}},t.addKeyword("select",e.definition),t.addKeyword("selectCases",{compile:function(e,t){var n=r(t);for(var o in e)n.cases[o]=a(e[o]);return function(){return!0}},valid:!0,metaSchema:{type:"object",additionalProperties:n}}),t.addKeyword("selectDefault",{compile:function(e,t){return r(t).default=a(e),function(){return!0}},valid:!0,metaSchema:n}),t};