/* MIT license */

function comparativeDistance(r,n){return Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2)+Math.pow(r[2]-n[2],2)}var cssKeywords=require("color-name"),reverseKeywords={};for(var key in cssKeywords)cssKeywords.hasOwnProperty(key)&&(reverseKeywords[cssKeywords[key]]=key);var convert=module.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var model in convert)if(convert.hasOwnProperty(model)){if(!("channels"in convert[model]))throw new Error("missing channels property: "+model);if(!("labels"in convert[model]))throw new Error("missing channel labels property: "+model);if(convert[model].labels.length!==convert[model].channels)throw new Error("channel and label counts mismatch: "+model);var channels=convert[model].channels,labels=convert[model].labels;delete convert[model].channels,delete convert[model].labels,Object.defineProperty(convert[model],"channels",{value:channels}),Object.defineProperty(convert[model],"labels",{value:labels})}convert.rgb.hsl=function(r){var n,e,t,a=r[0]/255,o=r[1]/255,c=r[2]/255,h=Math.min(a,o,c),s=Math.max(a,o,c),l=s-h;return s===h?n=0:a===s?n=(o-c)/l:o===s?n=2+(c-a)/l:c===s&&(n=4+(a-o)/l),n=Math.min(60*n,360),n<0&&(n+=360),t=(h+s)/2,e=s===h?0:t<=.5?l/(s+h):l/(2-s-h),[n,100*e,100*t]},convert.rgb.hsv=function(r){var n,e,t,a=r[0],o=r[1],c=r[2],h=Math.min(a,o,c),s=Math.max(a,o,c),l=s-h;return e=0===s?0:l/s*1e3/10,s===h?n=0:a===s?n=(o-c)/l:o===s?n=2+(c-a)/l:c===s&&(n=4+(a-o)/l),n=Math.min(60*n,360),n<0&&(n+=360),t=s/255*1e3/10,[n,e,t]},convert.rgb.hwb=function(r){var n=r[0],e=r[1],t=r[2],a=convert.rgb.hsl(r)[0],o=1/255*Math.min(n,Math.min(e,t));return t=1-1/255*Math.max(n,Math.max(e,t)),[a,100*o,100*t]},convert.rgb.cmyk=function(r){var n,e,t,a,o=r[0]/255,c=r[1]/255,h=r[2]/255;return a=Math.min(1-o,1-c,1-h),n=(1-o-a)/(1-a)||0,e=(1-c-a)/(1-a)||0,t=(1-h-a)/(1-a)||0,[100*n,100*e,100*t,100*a]},convert.rgb.keyword=function(r){var n=reverseKeywords[r];if(n)return n;var e,t=1/0;for(var a in cssKeywords)if(cssKeywords.hasOwnProperty(a)){var o=cssKeywords[a],c=comparativeDistance(r,o);c<t&&(t=c,e=a)}return e},convert.keyword.rgb=function(r){return cssKeywords[r]},convert.rgb.xyz=function(r){var n=r[0]/255,e=r[1]/255,t=r[2]/255;return n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,[100*(.4124*n+.3576*e+.1805*t),100*(.2126*n+.7152*e+.0722*t),100*(.0193*n+.1192*e+.9505*t)]},convert.rgb.lab=function(r){var n,e,t,a=convert.rgb.xyz(r),o=a[0],c=a[1],h=a[2];return o/=95.047,c/=100,h/=108.883,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,c=c>.008856?Math.pow(c,1/3):7.787*c+16/116,h=h>.008856?Math.pow(h,1/3):7.787*h+16/116,n=116*c-16,e=500*(o-c),t=200*(c-h),[n,e,t]},convert.hsl.rgb=function(r){var n,e,t,a,o,c=r[0]/360,h=r[1]/100,s=r[2]/100;if(0===h)return o=255*s,[o,o,o];e=s<.5?s*(1+h):s+h-s*h,n=2*s-e,a=[0,0,0];for(var l=0;l<3;l++)t=c+1/3*-(l-1),t<0&&t++,t>1&&t--,o=6*t<1?n+6*(e-n)*t:2*t<1?e:3*t<2?n+(e-n)*(2/3-t)*6:n,a[l]=255*o;return a},convert.hsl.hsv=function(r){var n,e,t=r[0],a=r[1]/100,o=r[2]/100,c=a,h=Math.max(o,.01);return o*=2,a*=o<=1?o:2-o,c*=h<=1?h:2-h,e=(o+a)/2,n=0===o?2*c/(h+c):2*a/(o+a),[t,100*n,100*e]},convert.hsv.rgb=function(r){var n=r[0]/60,e=r[1]/100,t=r[2]/100,a=Math.floor(n)%6,o=n-Math.floor(n),c=255*t*(1-e),h=255*t*(1-e*o),s=255*t*(1-e*(1-o));switch(t*=255,a){case 0:return[t,s,c];case 1:return[h,t,c];case 2:return[c,t,s];case 3:return[c,h,t];case 4:return[s,c,t];case 5:return[t,c,h]}},convert.hsv.hsl=function(r){var n,e,t,a=r[0],o=r[1]/100,c=r[2]/100,h=Math.max(c,.01);return t=(2-o)*c,n=(2-o)*h,e=o*h,e/=n<=1?n:2-n,e=e||0,t/=2,[a,100*e,100*t]},convert.hwb.rgb=function(r){var n,e,t,a,o=r[0]/360,c=r[1]/100,h=r[2]/100,s=c+h;s>1&&(c/=s,h/=s),n=Math.floor(6*o),e=1-h,t=6*o-n,0!=(1&n)&&(t=1-t),a=c+t*(e-c);var l,v,u;switch(n){default:case 6:case 0:l=e,v=a,u=c;break;case 1:l=a,v=e,u=c;break;case 2:l=c,v=e,u=a;break;case 3:l=c,v=a,u=e;break;case 4:l=a,v=c,u=e;break;case 5:l=e,v=c,u=a}return[255*l,255*v,255*u]},convert.cmyk.rgb=function(r){var n,e,t,a=r[0]/100,o=r[1]/100,c=r[2]/100,h=r[3]/100;return n=1-Math.min(1,a*(1-h)+h),e=1-Math.min(1,o*(1-h)+h),t=1-Math.min(1,c*(1-h)+h),[255*n,255*e,255*t]},convert.xyz.rgb=function(r){var n,e,t,a=r[0]/100,o=r[1]/100,c=r[2]/100;return n=3.2406*a+-1.5372*o+-.4986*c,e=-.9689*a+1.8758*o+.0415*c,t=.0557*a+-.204*o+1.057*c,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,e=e>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,t=t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,n=Math.min(Math.max(0,n),1),e=Math.min(Math.max(0,e),1),t=Math.min(Math.max(0,t),1),[255*n,255*e,255*t]},convert.xyz.lab=function(r){var n,e,t,a=r[0],o=r[1],c=r[2];return a/=95.047,o/=100,c/=108.883,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,c=c>.008856?Math.pow(c,1/3):7.787*c+16/116,n=116*o-16,e=500*(a-o),t=200*(o-c),[n,e,t]},convert.lab.xyz=function(r){var n,e,t,a=r[0],o=r[1],c=r[2];e=(a+16)/116,n=o/500+e,t=e-c/200;var h=Math.pow(e,3),s=Math.pow(n,3),l=Math.pow(t,3);return e=h>.008856?h:(e-16/116)/7.787,n=s>.008856?s:(n-16/116)/7.787,t=l>.008856?l:(t-16/116)/7.787,n*=95.047,e*=100,t*=108.883,[n,e,t]},convert.lab.lch=function(r){var n,e,t,a=r[0],o=r[1],c=r[2];return n=Math.atan2(c,o),e=360*n/2/Math.PI,e<0&&(e+=360),t=Math.sqrt(o*o+c*c),[a,t,e]},convert.lch.lab=function(r){var n,e,t,a=r[0],o=r[1],c=r[2];return t=c/360*2*Math.PI,n=o*Math.cos(t),e=o*Math.sin(t),[a,n,e]},convert.rgb.ansi16=function(r){var n=r[0],e=r[1],t=r[2],a=1 in arguments?arguments[1]:convert.rgb.hsv(r)[2];if(0===(a=Math.round(a/50)))return 30;var o=30+(Math.round(t/255)<<2|Math.round(e/255)<<1|Math.round(n/255));return 2===a&&(o+=60),o},convert.hsv.ansi16=function(r){return convert.rgb.ansi16(convert.hsv.rgb(r),r[2])},convert.rgb.ansi256=function(r){var n=r[0],e=r[1],t=r[2];return n===e&&e===t?n<8?16:n>248?231:Math.round((n-8)/247*24)+232:16+36*Math.round(n/255*5)+6*Math.round(e/255*5)+Math.round(t/255*5)},convert.ansi16.rgb=function(r){var n=r%10;if(0===n||7===n)return r>50&&(n+=3.5),n=n/10.5*255,[n,n,n];var e=.5*(1+~~(r>50));return[(1&n)*e*255,(n>>1&1)*e*255,(n>>2&1)*e*255]},convert.ansi256.rgb=function(r){if(r>=232){var n=10*(r-232)+8;return[n,n,n]}r-=16;var e;return[Math.floor(r/36)/5*255,Math.floor((e=r%36)/6)/5*255,e%6/5*255]},convert.rgb.hex=function(r){var n=((255&Math.round(r[0]))<<16)+((255&Math.round(r[1]))<<8)+(255&Math.round(r[2])),e=n.toString(16).toUpperCase();return"000000".substring(e.length)+e},convert.hex.rgb=function(r){var n=r.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!n)return[0,0,0];var e=n[0];3===n[0].length&&(e=e.split("").map(function(r){return r+r}).join(""));var t=parseInt(e,16);return[t>>16&255,t>>8&255,255&t]},convert.rgb.hcg=function(r){var n,e,t=r[0]/255,a=r[1]/255,o=r[2]/255,c=Math.max(Math.max(t,a),o),h=Math.min(Math.min(t,a),o),s=c-h;return n=s<1?h/(1-s):0,e=s<=0?0:c===t?(a-o)/s%6:c===a?2+(o-t)/s:4+(t-a)/s+4,e/=6,e%=1,[360*e,100*s,100*n]},convert.hsl.hcg=function(r){var n=r[1]/100,e=r[2]/100,t=1,a=0;return t=e<.5?2*n*e:2*n*(1-e),t<1&&(a=(e-.5*t)/(1-t)),[r[0],100*t,100*a]},convert.hsv.hcg=function(r){var n=r[1]/100,e=r[2]/100,t=n*e,a=0;return t<1&&(a=(e-t)/(1-t)),[r[0],100*t,100*a]},convert.hcg.rgb=function(r){var n=r[0]/360,e=r[1]/100,t=r[2]/100;if(0===e)return[255*t,255*t,255*t];var a=[0,0,0],o=n%1*6,c=o%1,h=1-c,s=0;switch(Math.floor(o)){case 0:a[0]=1,a[1]=c,a[2]=0;break;case 1:a[0]=h,a[1]=1,a[2]=0;break;case 2:a[0]=0,a[1]=1,a[2]=c;break;case 3:a[0]=0,a[1]=h,a[2]=1;break;case 4:a[0]=c,a[1]=0,a[2]=1;break;default:a[0]=1,a[1]=0,a[2]=h}return s=(1-e)*t,[255*(e*a[0]+s),255*(e*a[1]+s),255*(e*a[2]+s)]},convert.hcg.hsv=function(r){var n=r[1]/100,e=r[2]/100,t=n+e*(1-n),a=0;return t>0&&(a=n/t),[r[0],100*a,100*t]},convert.hcg.hsl=function(r){var n=r[1]/100,e=r[2]/100,t=e*(1-n)+.5*n,a=0;return t>0&&t<.5?a=n/(2*t):t>=.5&&t<1&&(a=n/(2*(1-t))),[r[0],100*a,100*t]},convert.hcg.hwb=function(r){var n=r[1]/100,e=r[2]/100,t=n+e*(1-n);return[r[0],100*(t-n),100*(1-t)]},convert.hwb.hcg=function(r){var n=r[1]/100,e=r[2]/100,t=1-e,a=t-n,o=0;return a<1&&(o=(t-a)/(1-a)),[r[0],100*a,100*o]},convert.apple.rgb=function(r){return[r[0]/65535*255,r[1]/65535*255,r[2]/65535*255]},convert.rgb.apple=function(r){return[r[0]/255*65535,r[1]/255*65535,r[2]/255*65535]},convert.gray.rgb=function(r){return[r[0]/100*255,r[0]/100*255,r[0]/100*255]},convert.gray.hsl=convert.gray.hsv=function(r){return[0,0,r[0]]},convert.gray.hwb=function(r){return[0,100,r[0]]},convert.gray.cmyk=function(r){return[0,0,0,r[0]]},convert.gray.lab=function(r){return[r[0],0,0]},convert.gray.hex=function(r){var n=255&Math.round(r[0]/100*255),e=(n<<16)+(n<<8)+n,t=e.toString(16).toUpperCase();return"000000".substring(t.length)+t},convert.rgb.gray=function(r){return[(r[0]+r[1]+r[2])/3/255*100]};