module.exports=function(r,n){n||(n={}),"function"==typeof n&&(n={cmp:n});var t=n.space||"";"number"==typeof t&&(t=Array(t+1).join(" "));var e="boolean"==typeof n.cycles&&n.cycles,o=n.replacer||function(r,n){return n},i=n.cmp&&function(r){return function(n){return function(t,e){var o={key:t,value:n[t]},i={key:e,value:n[e]};return r(o,i)}}}(n.cmp),u=[];return function r(n,c,f,a){var y=t?"\n"+new Array(a+1).join(t):"",l=t?": ":":";if(f&&f.toJSON&&"function"==typeof f.toJSON&&(f=f.toJSON()),void 0!==(f=o.call(n,c,f))){if("object"!=typeof f||null===f)return JSON.stringify(f);if(isArray(f)){for(var s=[],p=0;p<f.length;p++){var v=r(f,p,f[p],a+1)||JSON.stringify(null);s.push(y+t+v)}return"["+s.join(",")+y+"]"}if(-1!==u.indexOf(f)){if(e)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}u.push(f);for(var O=objectKeys(f).sort(i&&i(f)),s=[],p=0;p<O.length;p++){var c=O[p],j=r(f,c,f[c],a+1);if(j){var S=JSON.stringify(c)+l+j;s.push(y+t+S)}}return u.splice(u.indexOf(f),1),"{"+s.join(",")+y+"}"}}({"":r},"",r,0)};var isArray=Array.isArray||function(r){return"[object Array]"==={}.toString.call(r)},objectKeys=Object.keys||function(r){var n=Object.prototype.hasOwnProperty||function(){return!0},t=[];for(var e in r)n.call(r,e)&&t.push(e);return t};