function dotindex(r){var n=/\.[^.]*$/.exec(r);return n?n.index+1:r.length}function reduce(r,n,t){if(r.reduce)return r.reduce(n,t);for(var e=0,o=arguments.length>=3?t:r[e++];e<r.length;e++)n(o,r[e],e);return o}function forEach(r,n){if(r.forEach)return r.forEach(n);for(var t=0;t<r.length;t++)n.call(r,r[t],t)}function map(r,n){if(r.map)return r.map(n);for(var t=[],e=0;e<r.length;e++)t.push(n.call(r,r[e],e));return t}module.exports=function(r,n){n||(n={});var t=void 0===n.hsep?"  ":n.hsep,e=n.align||[],o=n.stringLength||function(r){return String(r).length},u=reduce(r,function(r,n){return forEach(n,function(n,t){var e=dotindex(n);(!r[t]||e>r[t])&&(r[t]=e)}),r},[]),a=map(r,function(r){return map(r,function(r,n){var t=String(r);if("."===e[n]){var a=dotindex(t),i=u[n]+(/\./.test(t)?1:2)-(o(t)-a);return t+Array(i).join(" ")}return t})}),i=reduce(a,function(r,n){return forEach(n,function(n,t){var e=o(n);(!r[t]||e>r[t])&&(r[t]=e)}),r},[]);return map(a,function(r){return map(r,function(r,n){var t=i[n]-o(r)||0,u=Array(Math.max(t+1,1)).join(" ");return"r"===e[n]||"."===e[n]?u+r:"c"===e[n]?Array(Math.ceil(t/2+1)).join(" ")+r+Array(Math.floor(t/2+1)).join(" "):r+u}).join(t).replace(/\s+$/,"")}).join("\n")};