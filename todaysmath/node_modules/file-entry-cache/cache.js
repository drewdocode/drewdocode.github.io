var path=require("path");module.exports={createFromFile:function(e){var t=path.basename(e),n=path.dirname(e);return this.create(t,n)},create:function(e,t){var n=require("fs"),r=require("flat-cache"),i=r.load(e,t),a=require("object-assign"),o={},c=function(){i.keys().forEach(function(e){try{n.statSync(e)}catch(t){"ENOENT"===t.code&&i.removeKey(e)}})};return c(),{cache:i,hasFileChanged:function(e){return this.getFileDescriptor(e).changed},analyzeFiles:function(e){var t=this;e=e||[];var n={changedFiles:[],notFoundFiles:[],notChangedFiles:[]};return t.normalizeEntries(e).forEach(function(e){return e.changed?void n.changedFiles.push(e.key):e.notFound?void n.notFoundFiles.push(e.key):void n.notChangedFiles.push(e.key)}),n},getFileDescriptor:function(e){var t,r=i.getKey(e),a=!!r,c=this;try{t=n.statSync(e)}catch(t){return c.removeEntry(e),{key:e,notFound:!0,err:t}}var s=t.size,u=t.mtime.getTime();if(r)var h=u!==r.mtime,l=s!==r.size;else r={size:s,mtime:u};return o[e]={key:e,changed:!a||h||l,meta:r}},getUpdatedFiles:function(e){var t=this;return e=e||[],t.normalizeEntries(e).filter(function(e){return e.changed}).map(function(e){return e.key})},normalizeEntries:function(e){e=e||[];var t=this;return e.map(function(e){return t.getFileDescriptor(e)})},removeEntry:function(e){delete o[e],i.removeKey(e)},deleteCacheFile:function(){i.removeCacheFile()},destroy:function(){o={},i.destroy()},reconcile:function(){c();var e=o,t=Object.keys(e);0!==t.length&&(t.forEach(function(t){var r=e[t];try{var o=n.statSync(r.key),c=a(r.meta,{size:o.size,mtime:o.mtime.getTime()});i.setKey(t,c)}catch(e){if("ENOENT"!==e.code)throw e}}),i.save(!0))}}}};