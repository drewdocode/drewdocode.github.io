function PassThrough(){Stream.call(this),this.readable=this.writable=!0}var Stream=require("stream"),tap=require("tap"),MS=require("../mute.js"),END={},PAUSE={},RESUME={};PassThrough.prototype=Object.create(Stream.prototype,{constructor:{value:PassThrough},write:{value:function(e){return this.emit("data",e),!0}},end:{value:function(e){e&&this.write(e),this.emit("end")}},pause:{value:function(){this.emit("pause")}},resume:{value:function(){this.emit("resume")}}}),tap.test("incoming",function(e){var t=new MS,u=new PassThrough;u.pipe(t);var a=["foo","boo",END];t.on("data",function(t){e.equal(t,a.shift())}),t.on("end",function(){e.equal(END,a.shift()),e.end()}),u.write("foo"),t.mute(),u.write("bar"),t.unmute(),u.write("boo"),t.mute(),u.write("blaz"),u.end("grelb")}),tap.test("outgoing",function(e){var t=new MS,u=new PassThrough;t.pipe(u);var a=["foo","boo",END];u.on("data",function(t){e.equal(t,a.shift())}),u.on("end",function(){e.equal(END,a.shift()),e.end()}),t.write("foo"),t.mute(),t.write("bar"),t.unmute(),t.write("boo"),t.mute(),t.write("blaz"),t.end("grelb")}),tap.test("isTTY",function(e){var t=new PassThrough;t.isTTY=!0,t.columns=80,t.rows=24;var u=new MS;e.equal(u.isTTY,!1),e.equal(u.columns,void 0),e.equal(u.rows,void 0),u.pipe(t),e.equal(u.isTTY,!0),e.equal(u.columns,80),e.equal(u.rows,24),t.isTTY=!1,e.equal(u.isTTY,!1),e.equal(u.columns,80),e.equal(u.rows,24),t.isTTY=!0,e.equal(u.isTTY,!0),e.equal(u.columns,80),e.equal(u.rows,24),u.isTTY=!1,e.equal(u.isTTY,!1),e.equal(u.columns,80),e.equal(u.rows,24),u=new MS,e.equal(u.isTTY,!1),t.pipe(u),e.equal(u.isTTY,!0),t.isTTY=!1,e.equal(u.isTTY,!1),t.isTTY=!0,e.equal(u.isTTY,!0),u.isTTY=!1,e.equal(u.isTTY,!1),e.end()}),tap.test("pause/resume incoming",function(e){var t=new PassThrough,u=new MS;t.on("pause",function(){e.equal(PAUSE,a.shift())}),t.on("resume",function(){e.equal(RESUME,a.shift())});var a=[PAUSE,RESUME,PAUSE,RESUME];t.pipe(u),u.pause(),u.resume(),u.pause(),u.resume(),e.equal(a.length,0,"saw all events"),e.end()}),tap.test("replace with *",function(e){var t=new PassThrough,u=new MS({replace:"*"});t.pipe(u);var a=["foo","*****","bar","***","baz","boo","**","****"];u.on("data",function(t){e.equal(t,a.shift())}),t.write("foo"),u.mute(),t.write("12345"),u.unmute(),t.write("bar"),u.mute(),t.write("baz"),u.unmute(),t.write("baz"),t.write("boo"),u.mute(),t.write("xy"),t.write("xyzΩ"),e.equal(a.length,0),e.end()}),tap.test("replace with ~YARG~",function(e){var t=new PassThrough,u=new MS({replace:"~YARG~"});t.pipe(u);var a=["foo","~YARG~~YARG~~YARG~~YARG~~YARG~","bar","~YARG~~YARG~~YARG~","baz","boo","~YARG~~YARG~","~YARG~~YARG~~YARG~~YARG~"];u.on("data",function(t){e.equal(t,a.shift())}),t.write("foo"),u.mute(),t.write("ΩΩ"),u.unmute(),t.write("bar"),u.mute(),t.write("Ω"),u.unmute(),t.write("baz"),t.write("boo"),u.mute(),t.write("Ω"),t.write("ΩΩ"),e.equal(a.length,0),e.end()});