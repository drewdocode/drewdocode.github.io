var ExternalEditor=require("./main"),readline=require("readline"),rl=readline.createInterface({input:process.stdin,output:null}),message="\n\n# Please Write a message\n# Any line starting with # is ignored";process.stdout.write("Please write a message. (press enter to launch your preferred editor)"),editor=new ExternalEditor(message),rl.on("line",function(){try{rl.pause(),editor.runAsync(function(e,r){e&&(process.stdout.write(e.message),process.exit(1)),0===r.length?(readline.moveCursor(process.stdout,0,-1),process.stdout.write("Your message was empty, please try again. (press enter to launch your preferred editor)"),rl.resume()):(process.stdout.write("Your Message:\n"),process.stdout.write(r),process.stdout.write("\n"),rl.close())})}catch(e){process.stderr.write(e.message),process.stdout.write("\n"),rl.close()}});