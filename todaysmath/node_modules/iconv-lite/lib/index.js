var Buffer=require("buffer").Buffer,bomHandling=require("./bom-handling"),iconv=module.exports;iconv.encodings=null,iconv.defaultCharUnicode="ï¿½",iconv.defaultCharSingleByte="?",iconv.encode=function(e,n,o){e=""+(e||"");var r=iconv.getEncoder(n,o),c=r.write(e),i=r.end();return i&&i.length>0?Buffer.concat([c,i]):c},iconv.decode=function(e,n,o){"string"==typeof e&&(iconv.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),iconv.skipDecodeWarning=!0),e=new Buffer(""+(e||""),"binary"));var r=iconv.getDecoder(n,o),c=r.write(e),i=r.end();return i?c+i:c},iconv.encodingExists=function(e){try{return iconv.getCodec(e),!0}catch(e){return!1}},iconv.toEncoding=iconv.encode,iconv.fromEncoding=iconv.decode,iconv._codecDataCache={},iconv.getCodec=function(e){iconv.encodings||(iconv.encodings=require("../encodings"));for(var n=(""+e).toLowerCase().replace(/[^0-9a-z]|:\d{4}$/g,""),o={};;){var r=iconv._codecDataCache[n];if(r)return r;var c=iconv.encodings[n];switch(typeof c){case"string":n=c;break;case"object":for(var i in c)o[i]=c[i];o.encodingName||(o.encodingName=n),n=c.type;break;case"function":return o.encodingName||(o.encodingName=n),r=new c(o,iconv),iconv._codecDataCache[o.encodingName]=r,r;default:throw new Error("Encoding not recognized: '"+e+"' (searched as: '"+n+"')")}}},iconv.getEncoder=function(e,n){var o=iconv.getCodec(e),r=new o.encoder(n,o);return o.bomAware&&n&&n.addBOM&&(r=new bomHandling.PrependBOM(r,n)),r},iconv.getDecoder=function(e,n){var o=iconv.getCodec(e),r=new o.decoder(n,o);return!o.bomAware||n&&!1===n.stripBOM||(r=new bomHandling.StripBOM(r,n)),r};var nodeVer="undefined"!=typeof process&&process.versions&&process.versions.node;if(nodeVer){var nodeVerArr=nodeVer.split(".").map(Number);(nodeVerArr[0]>0||nodeVerArr[1]>=10)&&require("./streams")(iconv),require("./extend-node")(iconv)}