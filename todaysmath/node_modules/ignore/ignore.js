function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function make_array(e){return Array.isArray(e)?e:[e]}function make_regex(e,t){var n=cache[e];if(n)return n;var r=t?NEGATIVE_REPLACERS:POSITIVE_REPLACERS,i=r.reduce(function(t,n){return t.replace(n[0],n[1].bind(e))},e);return cache[e]=new RegExp(i,"i")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();module.exports=function(){return new IgnoreBase};var REGEX_BLANK_LINE=/^\s+$/,REGEX_LEADING_EXCAPED_EXCLAMATION=/^\\\!/,REGEX_LEADING_EXCAPED_HASH=/^\\#/,SLASH="/",KEY_IGNORE="undefined"!=typeof Symbol?Symbol.for("node-ignore"):"node-ignore",IgnoreBase=function(){function e(){_classCallCheck(this,e),this._rules=[],this[KEY_IGNORE]=!0,this._initCache()}return _createClass(e,[{key:"_initCache",value:function(){this._cache={}}},{key:"add",value:function(e){return this._added=!1,"string"==typeof e&&(e=e.split(/\r?\n/g)),make_array(e).forEach(this._addPattern,this),this._added&&this._initCache(),this}},{key:"addPattern",value:function(e){return this.add(e)}},{key:"_addPattern",value:function(e){if(e&&e[KEY_IGNORE])return this._rules=this._rules.concat(e._rules),void(this._added=!0);if(this._checkPattern(e)){var t=this._createRule(e);this._added=!0,this._rules.push(t)}}},{key:"_checkPattern",value:function(e){return e&&"string"==typeof e&&!REGEX_BLANK_LINE.test(e)&&0!==e.indexOf("#")}},{key:"filter",value:function(e){var t=this;return make_array(e).filter(function(e){return t._filter(e)})}},{key:"createFilter",value:function(){var e=this;return function(t){return e._filter(t)}}},{key:"ignores",value:function(e){return!this._filter(e)}},{key:"_createRule",value:function(e){var t=e,n=!1;return 0===e.indexOf("!")&&(n=!0,e=e.substr(1)),e=e.replace(REGEX_LEADING_EXCAPED_EXCLAMATION,"!").replace(REGEX_LEADING_EXCAPED_HASH,"#"),{origin:t,pattern:e,negative:n,regex:make_regex(e,n)}}},{key:"_filter",value:function(e,t){return!!e&&(e in this._cache?this._cache[e]:(t||(t=e.split(SLASH)),t.pop(),this._cache[e]=t.length?this._filter(t.join(SLASH)+SLASH,t)&&this._test(e):this._test(e)))}},{key:"_test",value:function(e){var t=0;return this._rules.forEach(function(n){t^n.negative||(t=n.negative^n.regex.test(e))}),!t}}]),e}(),DEFAULT_REPLACER_PREFIX=[[/\\?\s+$/,function(e){return 0===e.indexOf("\\")?" ":""}],[/\\\s/g,function(){return" "}],[/[\\\^$.|?*+()\[{]/g,function(e){return"\\"+e}],[/^\//,function(){return"^"}],[/\//g,function(){return"\\/"}],[/^\^*\\\*\\\*\\\//,function(){return"^(?:.*\\/)?"}]],DEFAULT_REPLACER_SUFFIX=[[/^(?=[^\^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,function(e,t,n){return t+6<n.length?"(?:\\/[^\\/]+)*":"\\/.+"}],[/(^|[^\\]+)\\\*(?=.+)/g,function(e,t){return t+"[^\\/]*"}],[/(\^|\\\/)?\\\*$/,function(e,t){return(t?t+"[^/]+":"[^/]*")+"(?=$|\\/$)"}],[/\\\\\\/g,function(){return"\\"}]],POSITIVE_REPLACERS=[].concat(DEFAULT_REPLACER_PREFIX,[[/(?:[^*\/])$/,function(e){return e+"(?=$|\\/)"}]],DEFAULT_REPLACER_SUFFIX),NEGATIVE_REPLACERS=[].concat(DEFAULT_REPLACER_PREFIX,[[/(?:[^*\/])$/,function(e){return e+"(?=$|\\/$)"}]],DEFAULT_REPLACER_SUFFIX),cache={};if("undefined"!=typeof process&&(process.env&&process.env.IGNORE_TEST_WIN32||"win32"===process.platform)){var filter=IgnoreBase.prototype._filter,make_posix=function(e){return/^\\\\\?\\/.test(e)||/[^\x00-\x80]+/.test(e)?e:e.replace(/\\/g,"/")};IgnoreBase.prototype._filter=function(e,t){return e=make_posix(e),filter.call(this,e,t)}}