!function(){"use strict";function t(t,e,r){return t.slice(e,r)}function e(t){return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57}function r(t){return"param"===t||"argument"===t||"arg"===t}function a(t){return"return"===t||"returns"===t}function i(t){return"property"===t||"prop"===t}function n(t){return r(t)||i(t)||"alias"===t||"this"===t||"mixes"===t||"requires"===t}function s(t){return n(t)||"const"===t||"constant"===t}function o(t){return i(t)||r(t)}function p(t){return i(t)||r(t)}function h(t){return r(t)||a(t)||"define"===t||"enum"===t||"implements"===t||"this"===t||"type"===t||"typedef"===t||i(t)}function u(t){return h(t)||"throws"===t||"const"===t||"constant"===t||"namespace"===t||"member"===t||"var"===t||"module"===t||"constructor"===t||"class"===t||"extends"===t||"augments"===t||"public"===t||"private"===t||"protected"===t}function c(t){return t.replace(/^\/\*\*?/,"").replace(/\*\/$/,"").replace(new RegExp(v,"g"),"$2").replace(/\s*$/,"")}function l(t,e){for(var r,a=t.replace(/^\/\*\*?/,""),i=0,n=new RegExp(v,"g");r=n.exec(a);)if(i+=r[1].length,r.index+r[0].length>e+i)return e+i+t.length-a.length;return t.replace(/\*\/$/,"").replace(/\s*$/,"").length}var d,f,g,m,y;m=require("esutils"),d=require("./typed"),f=require("./utility"),y=function(){var t=Object.prototype.hasOwnProperty;return function(e,r){return t.call(e,r)}}();var _="[ \\f\\t\\v\\u00a0\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]",v="("+_+"*(?:\\*"+_+"?)?)(.+|[\r\n\u2028\u2029])";!function(i){function g(){var t=L.charCodeAt(D);return D+=1,!m.code.isLineTerminator(t)||13===t&&10===L.charCodeAt(D)||(I+=1),String.fromCharCode(t)}function _(){var t="";for(g();D<k&&e(L.charCodeAt(D));)t+=g();return t}function v(){var t,e,r=D;for(e=!1;r<k;){if(t=L.charCodeAt(r),!m.code.isLineTerminator(t)||13===t&&10===L.charCodeAt(r+1)){if(e){if(64===t)break;m.code.isWhiteSpace(t)||(e=!1)}}else e=!0;r+=1}return r}function E(t,e,r){for(var a,i,n,s,o=!1;D<e;){if(a=L.charCodeAt(D),!m.code.isWhiteSpace(a)){if(123===a){g();break}o=!0;break}g()}if(o)return null;for(i=1,n="";D<e;)if(a=L.charCodeAt(D),m.code.isLineTerminator(a))g();else{if(125===a){if(0===(i-=1)){g();break}}else 123===a&&(i+=1);""===n&&(s=D),n+=g()}return 0!==i?f.throwError("Braces are not balanced"):p(t)?d.parseParamType(n,{startIndex:P(s),range:r}):d.parseType(n,{startIndex:P(s),range:r})}function A(t){var e;if(!m.code.isIdentifierStartES5(L.charCodeAt(D))&&!L[D].match(/[0-9]/))return null;for(e=g();D<t&&m.code.isIdentifierPartES5(L.charCodeAt(D));)e+=g();return e}function x(t){for(;D<t&&(m.code.isWhiteSpace(L.charCodeAt(D))||m.code.isLineTerminator(L.charCodeAt(D)));)g()}function T(t,e,r){var a,i,n="";if(x(t),D>=t)return null;if(91===L.charCodeAt(D)){if(!e)return null;a=!0,n=g()}if(n+=A(t),r)for(58!==L.charCodeAt(D)||"module"!==n&&"external"!==n&&"event"!==n||(n+=g(),n+=A(t)),91===L.charCodeAt(D)&&93===L.charCodeAt(D+1)&&(n+=g(),n+=g());46===L.charCodeAt(D)||47===L.charCodeAt(D)||35===L.charCodeAt(D)||45===L.charCodeAt(D)||126===L.charCodeAt(D);)n+=g(),n+=A(t);if(a){if(x(t),61===L.charCodeAt(D)){n+=g(),x(t);for(var s,o=1;D<t;){if(s=L.charCodeAt(D),m.code.isWhiteSpace(s)&&(i||(x(t),s=L.charCodeAt(D))),39===s&&(i?"'"===i&&(i=""):i="'"),34===s&&(i?'"'===i&&(i=""):i='"'),91===s)o++;else if(93===s&&0==--o)break;n+=g()}}if(x(t),D>=t||93!==L.charCodeAt(D))return null;n+=g()}return n}function C(){for(;D<k&&64!==L.charCodeAt(D);)g();return!(D>=k)&&(f.assert(64===L.charCodeAt(D)),!0)}function P(t){return L===M?t:l(M,t)}function N(t,e){this._options=t,this._title=e.toLowerCase(),this._tag={title:e,description:null},this._options.lineNumbers&&(this._tag.lineNumber=I),this._first=D-e.length-1,this._last=0,this._extra={}}function b(t){var e,r,a;if(!C())return null;for(e=_(),r=new N(t,e),a=r.parse();D<r._last;)g();return a}function O(t){var e,r,a="";for(r=!0;D<k&&(e=L.charCodeAt(D),!r||64!==e);)m.code.isLineTerminator(e)?r=!0:r&&!m.code.isWhiteSpace(e)&&(r=!1),a+=g();return t?a:a.trim()}function w(t,e){var r,a,i,n,s,o=[];if(void 0===e&&(e={}),L="boolean"==typeof e.unwrap&&e.unwrap?c(t):t,M=t,e.tags)if(Array.isArray(e.tags))for(i={},n=0,s=e.tags.length;n<s;n++)"string"==typeof e.tags[n]?i[e.tags[n]]=!0:f.throwError('Invalid "tags" parameter: '+e.tags);else f.throwError('Invalid "tags" parameter: '+e.tags);for(k=L.length,D=0,I=0,W=e.recoverable,$=e.sloppy,q=e.strict,a=O(e.preserveWhitespace);;){if(!(r=b(e)))break;i&&!i.hasOwnProperty(r.title)||o.push(r)}return{description:a,tags:o}}var S,D,I,k,L,M,W,$,q;N.prototype.addError=function(t){var e=Array.prototype.slice.call(arguments,1),r=t.replace(/%(\d)/g,function(t,r){return f.assert(r<e.length,"Message reference must be in range"),e[r]});return this._tag.errors||(this._tag.errors=[]),q&&f.throwError(r),this._tag.errors.push(r),W},N.prototype.parseType=function(){if(h(this._title))try{if(this._tag.type=E(this._title,this._last,this._options.range),!(this._tag.type||r(this._title)||a(this._title)||this.addError("Missing or invalid tag type")))return!1}catch(t){if(this._tag.type=null,!this.addError(t.message))return!1}else if(u(this._title))try{this._tag.type=E(this._title,this._last,this._options.range)}catch(t){}return!0},N.prototype._parseNamePath=function(t){var e;return!!((e=T(this._last,$&&p(this._title),!0))||t||this.addError("Missing or invalid tag name"))&&(this._tag.name=e,!0)},N.prototype.parseNamePath=function(){return this._parseNamePath(!1)},N.prototype.parseNamePathOptional=function(){return this._parseNamePath(!0)},N.prototype.parseName=function(){var t,e;if(s(this._title))if(this._tag.name=T(this._last,$&&p(this._title),o(this._title)),this._tag.name)e=this._tag.name,"["===e.charAt(0)&&"]"===e.charAt(e.length-1)&&(t=e.substring(1,e.length-1).split("="),t.length>1&&(this._tag.default=t.slice(1).join("=")),this._tag.name=t[0],this._tag.type&&"OptionalType"!==this._tag.type.type&&(this._tag.type={type:"OptionalType",expression:this._tag.type}));else{if(!n(this._title))return!0;if(r(this._title)&&this._tag.type&&this._tag.type.name)this._extra.name=this._tag.type,this._tag.name=this._tag.type.name,this._tag.type=null;else if(!this.addError("Missing or invalid tag name"))return!1}return!0},N.prototype.parseDescription=function(){var e=t(L,D,this._last).trim();return e&&(/^-\s+/.test(e)&&(e=e.substring(2)),this._tag.description=e),!0},N.prototype.parseCaption=function(){var e=t(L,D,this._last).trim(),r=e.indexOf("<caption>"),a=e.indexOf("</caption>");return r>=0&&a>=0?(this._tag.caption=e.substring(r+"<caption>".length,a).trim(),this._tag.description=e.substring(a+"</caption>".length).trim()):this._tag.description=e,!0},N.prototype.parseKind=function(){var e,r;return r={class:!0,constant:!0,event:!0,external:!0,file:!0,function:!0,member:!0,mixin:!0,module:!0,namespace:!0,typedef:!0},e=t(L,D,this._last).trim(),this._tag.kind=e,!(!y(r,e)&&!this.addError("Invalid kind name '%0'",e))},N.prototype.parseAccess=function(){var e;return e=t(L,D,this._last).trim(),this._tag.access=e,!("private"!==e&&"protected"!==e&&"public"!==e&&!this.addError("Invalid access name '%0'",e))},N.prototype.parseThis=function(){var e=t(L,D,this._last).trim();if(e&&"{"===e.charAt(0)){return this.parseType()&&"NameExpression"===this._tag.type.type||"UnionType"===this._tag.type.type?(this._tag.name=this._tag.type.name,!0):this.addError("Invalid name for this")}return this.parseNamePath()},N.prototype.parseVariation=function(){var e,r;return r=t(L,D,this._last).trim(),e=parseFloat(r,10),this._tag.variation=e,!(isNaN(e)&&!this.addError("Invalid variation '%0'",r))},N.prototype.ensureEnd=function(){var e=t(L,D,this._last).trim();return!(e&&!this.addError("Unknown content '%0'",e))},N.prototype.epilogue=function(){var t;return t=this._tag.description,!(p(this._title)&&!this._tag.type&&t&&"["===t.charAt(0)&&(this._tag.type=this._extra.name,this._tag.name||(this._tag.name=void 0),!$&&!this.addError("Missing or invalid tag name")))},S={access:["parseAccess"],alias:["parseNamePath","ensureEnd"],augments:["parseType","parseNamePathOptional","ensureEnd"],constructor:["parseType","parseNamePathOptional","ensureEnd"],class:["parseType","parseNamePathOptional","ensureEnd"],extends:["parseType","parseNamePathOptional","ensureEnd"],example:["parseCaption"],deprecated:["parseDescription"],global:["ensureEnd"],inner:["ensureEnd"],instance:["ensureEnd"],kind:["parseKind"],mixes:["parseNamePath","ensureEnd"],mixin:["parseNamePathOptional","ensureEnd"],member:["parseType","parseNamePathOptional","ensureEnd"],method:["parseNamePathOptional","ensureEnd"],module:["parseType","parseNamePathOptional","ensureEnd"],func:["parseNamePathOptional","ensureEnd"],function:["parseNamePathOptional","ensureEnd"],var:["parseType","parseNamePathOptional","ensureEnd"],name:["parseNamePath","ensureEnd"],namespace:["parseType","parseNamePathOptional","ensureEnd"],private:["parseType","parseDescription"],protected:["parseType","parseDescription"],public:["parseType","parseDescription"],readonly:["ensureEnd"],requires:["parseNamePath","ensureEnd"],since:["parseDescription"],static:["ensureEnd"],summary:["parseDescription"],this:["parseThis","ensureEnd"],todo:["parseDescription"],typedef:["parseType","parseNamePathOptional"],variation:["parseVariation"],version:["parseDescription"]},N.prototype.parse=function(){var t,e,r,a;if(!this._title&&!this.addError("Missing or invalid title"))return null;for(this._last=v(this._title),this._options.range&&(this._tag.range=[this._first,L.slice(0,this._last).replace(/\s*$/,"").length].map(P)),r=y(S,this._title)?S[this._title]:["parseType","parseName","parseDescription","epilogue"],t=0,e=r.length;t<e;++t)if(a=r[t],!this[a]())return null;return this._tag},i.parse=w}(g={}),exports.version=f.VERSION,exports.parse=g.parse,exports.parseType=d.parseType,exports.parseParamType=d.parseParamType,exports.unwrapComment=c,exports.Syntax=function(t){var e,r={};for(e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return r}(d.Syntax),exports.Error=f.DoctrineError,exports.type={Syntax:exports.Syntax,parseType:d.parseType,parseParamType:d.parseParamType,stringify:d.stringify}}();