function Prompt(){return Base.apply(this,arguments)}var util=require("util"),chalk=require("chalk"),Base=require("./base"),observe=require("../utils/events");module.exports=Prompt,util.inherits(Prompt,Base),Prompt.prototype._run=function(t){this.done=t;var e=observe(this.rl),r=e.line.map(this.filterInput.bind(this)),s=this.handleSubmitEvents(r);return s.success.forEach(this.onEnd.bind(this)),s.error.forEach(this.onError.bind(this)),e.keypress.takeUntil(s.success).forEach(this.onKeypress.bind(this)),this.render(),this},Prompt.prototype.render=function(t){var e="",r=this.getQuestion();"answered"===this.status?r+=chalk.cyan(this.answer):r+=this.rl.line,t&&(e=chalk.red(">> ")+t),this.screen.render(r,e)},Prompt.prototype.filterInput=function(t){return t||(null==this.opt.default?"":this.opt.default)},Prompt.prototype.onEnd=function(t){this.answer=t.value,this.status="answered",this.render(),this.screen.done(),this.done(t.value)},Prompt.prototype.onError=function(t){this.render(t.isValid)},Prompt.prototype.onKeypress=function(){this.render()};