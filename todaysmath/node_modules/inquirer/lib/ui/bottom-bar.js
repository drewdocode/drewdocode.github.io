function Prompt(t){t||(t={}),Base.apply(this,arguments),this.log=through(this.writeLog.bind(this)),this.bottomBar=t.bottomBar||"",this.render()}var util=require("util"),through=require("through"),Base=require("./baseUI"),rlUtils=require("../utils/readline"),_=require("lodash");module.exports=Prompt,util.inherits(Prompt,Base),Prompt.prototype.render=function(){return this.write(this.bottomBar),this},Prompt.prototype.clean=function(){return rlUtils.clearLine(this.rl,this.bottomBar.split("\n").length),this},Prompt.prototype.updateBottomBar=function(t){return rlUtils.clearLine(this.rl,1),this.rl.output.unmute(),this.clean(),this.bottomBar=t,this.render(),this.rl.output.mute(),this},Prompt.prototype.writeLog=function(t){return this.rl.output.unmute(),this.clean(),this.rl.output.write(this.enforceLF(t.toString())),this.render(),this.rl.output.mute(),this},Prompt.prototype.enforceLF=function(t){return t.match(/[\r\n]$/)?t:t+"\n"},Prompt.prototype.write=function(t){var r=t.split(/\n/);this.height=r.length,this.rl.setPrompt(_.last(r)),0===this.rl.output.rows&&0===this.rl.output.columns&&rlUtils.left(this.rl,t.length+this.rl.line.length),this.rl.output.write(t)};