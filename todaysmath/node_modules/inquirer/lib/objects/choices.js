var assert=require("assert"),_=require("lodash"),Separator=require("./separator"),Choice=require("./choice"),Choices=module.exports=function(e,t){this.choices=e.map(function(e){return"separator"===e.type?(e instanceof Separator||(e=new Separator(e.line)),e):new Choice(e,t)}),this.realChoices=this.choices.filter(Separator.exclude).filter(function(e){return!e.disabled}),Object.defineProperty(this,"length",{get:function(){return this.choices.length},set:function(e){this.choices.length=e}}),Object.defineProperty(this,"realLength",{get:function(){return this.realChoices.length},set:function(){throw new Error("Cannot set `realLength` of a Choices collection")}})};Choices.prototype.getChoice=function(e){return assert(_.isNumber(e)),this.realChoices[e]},Choices.prototype.get=function(e){return assert(_.isNumber(e)),this.choices[e]},Choices.prototype.where=function(e){return _.filter(this.realChoices,e)},Choices.prototype.pluck=function(e){return _.map(this.realChoices,e)},Choices.prototype.indexOf=function(){return this.choices.indexOf.apply(this.choices,arguments)},Choices.prototype.forEach=function(){return this.choices.forEach.apply(this.choices,arguments)},Choices.prototype.filter=function(){return this.choices.filter.apply(this.choices,arguments)},Choices.prototype.find=function(e){return _.find(this.choices,e)},Choices.prototype.push=function(){var e=_.map(arguments,function(e){return new Choice(e)});return this.choices.push.apply(this.choices,e),this.realChoices=this.choices.filter(Separator.exclude),this.choices};