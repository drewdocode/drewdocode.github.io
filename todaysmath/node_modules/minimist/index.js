function hasKey(t,e){var s=t;return e.slice(0,-1).forEach(function(t){s=s[t]||{}}),e[e.length-1]in s}function setKey(t,e,s){var n=t;e.slice(0,-1).forEach(function(t){void 0===n[t]&&(n[t]={}),n=n[t]});var o=e[e.length-1];void 0===n[o]||"boolean"==typeof n[o]?n[o]=s:Array.isArray(n[o])?n[o].push(s):n[o]=[n[o],s]}function isNumber(t){return"number"==typeof t||(!!/^0x[0-9a-f]+$/i.test(t)||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t))}function longest(t){return Math.max.apply(null,t.map(function(t){return t.length}))}module.exports=function(t,e){function s(t,e){var s=!n.strings[t]&&isNumber(e)?Number(e):e;setKey(i,t.split("."),s),(o[t]||[]).forEach(function(t){setKey(i,t.split("."),s)})}e||(e={});var n={bools:{},strings:{}};[].concat(e.boolean).filter(Boolean).forEach(function(t){n.bools[t]=!0}),[].concat(e.string).filter(Boolean).forEach(function(t){n.strings[t]=!0});var o={};Object.keys(e.alias||{}).forEach(function(t){o[t]=[].concat(e.alias[t]),o[t].forEach(function(e){o[e]=[t].concat(o[t].filter(function(t){return e!==t}))})});var r=e.default||{},i={_:[]};Object.keys(n.bools).forEach(function(t){s(t,void 0!==r[t]&&r[t])});var a=[];-1!==t.indexOf("--")&&(a=t.slice(t.indexOf("--")+1),t=t.slice(0,t.indexOf("--")));for(var c=0;c<t.length;c++){var f=t[c];if(/^--.+=/.test(f)){var l=f.match(/^--([^=]+)=([\s\S]*)$/);s(l[1],l[2])}else if(/^--no-.+/.test(f)){var u=f.match(/^--no-(.+)/)[1];s(u,!1)}else if(/^--.+/.test(f)){var u=f.match(/^--(.+)/)[1],h=t[c+1];void 0===h||/^-/.test(h)||n.bools[u]||o[u]&&n.bools[o[u]]?/^(true|false)$/.test(h)?(s(u,"true"===h),c++):s(u,!n.strings[u]||""):(s(u,h),c++)}else if(/^-[^-]+/.test(f)){for(var b=f.slice(1,-1).split(""),v=!1,d=0;d<b.length;d++){var h=f.slice(d+2);if("-"!==h){if(/[A-Za-z]/.test(b[d])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(h)){s(b[d],h),v=!0;break}if(b[d+1]&&b[d+1].match(/\W/)){s(b[d],f.slice(d+2)),v=!0;break}s(b[d],!n.strings[b[d]]||"")}else s(b[d],h)}var u=f.slice(-1)[0];v||"-"===u||(!t[c+1]||/^(-|--)[^-]/.test(t[c+1])||n.bools[u]||o[u]&&n.bools[o[u]]?t[c+1]&&/true|false/.test(t[c+1])?(s(u,"true"===t[c+1]),c++):s(u,!n.strings[u]||""):(s(u,t[c+1]),c++))}else i._.push(n.strings._||!isNumber(f)?f:Number(f))}return Object.keys(r).forEach(function(t){hasKey(i,t.split("."))||(setKey(i,t.split("."),r[t]),(o[t]||[]).forEach(function(e){setKey(i,e.split("."),r[t])}))}),a.forEach(function(t){i._.push(t)}),i};