(function(){function n(n,e){var t,r;return t=n.length,r=e-t,n+""+a(" ",r>0?r:0)}function e(n){var e,t,a;return e=n.charAt(0).toUpperCase(),t=n.slice(1),a=/[\.!\?]$/.test(n)?"":".",e+""+t+a}function t(n,e){return n.replace(/{{([a-zA-Z$_][a-zA-Z$_0-9]*)}}/g,function(n,t){var a;return null!=(a=e[t])?a:"{{"+t+"}}"})}function a(n,e){for(var t="";e>0;(e>>=1)&&(n+=n))1&e&&(t+=n);return t}var r,l,i,o,u,p,s,c,d,h,f,g,m,y,v;r=require("prelude-ls"),l=r.id,r.find,i=r.sort,o=r.min,u=r.max,p=r.map,s=r.unlines,r=require("./util"),c=r.nameToRaw,d=r.dasherize,h=r.naturalJoin,f=require("wordwrap"),g=function(n,e,t){var a,r,l,i,o,u,s,d,h,g,m,y,v,S;return a=n.option,r=null!=(l=n.shortNames)?l:[],i=null!=(l=n.longNames)?l:[],o=n.type,n.description,u=e.aliasSeparator,s=e.typeSeparator,d=e.initialIndent,n.negateName&&(a="no-"+a,i&&(i=p(function(n){return"no-"+n},i))),h=1===a.length?[a].concat(r,i):r.concat([a],i),g=p(c,h).join(u),m=g.length,y="NUM"===a?"::":s,v=y.length,null!=t&&!n.boolean&&d+m+v+o.length>t?(S=f(d+m+v,t),g+""+y+S(o).replace(/^\s+/,"")):g+""+(n.boolean?"":y+""+o)},m=function(n){null==n.aliasSeparator&&(n.aliasSeparator=", "),null==n.typeSeparator&&(n.typeSeparator=" "),null==n.descriptionSeparator&&(n.descriptionSeparator="  "),null==n.initialIndent&&(n.initialIndent=2),null==n.secondaryIndent&&(n.secondaryIndent=4),null==n.maxPadFactor&&(n.maxPadFactor=1.5)},y=function(n,t){var r,i,o;return r=t.stdout,i=null!=(o=t.helpStyle)?o:{},m(i),function(t){var o,u,p,c,h,m,y,v,S,w,x,I,N,T,F;o=null!=r&&r.isTTY?r.columns-1:null,u=o?f(o):l;try{p=n(d(t))}catch(n){return c=n,c.message}return h=g(p,i),m=p.default&&!p.negateName?"\ndefault: "+p.default:"",y=p.restPositional?"Everything after this option is considered a positional argument, even if it looks like an option.":"",v=p.longDescription||p.description&&e(p.description),S=v&&y?v+" "+y:(w=v||y)?w:"",x="description:",I=S?o&&S.length-1-x.length>o?"\n"+x+"\n"+u(S):"\n"+x+" "+S:"",N=(w=p.example)?(T=[].concat(w),T.length>1?"\nexamples:\n"+s(T):"\nexample: "+T[0]):"",F=m||I||N?"\n"+a("=",h.length):"",h+""+F+m+I+N}},v=function(e){var r,l,p,c,d,y,v,S,w,x;return r=e.options,l=e.prepend,p=e.append,c=null!=(d=e.helpStyle)?d:{},y=e.stdout,m(c),c.aliasSeparator,c.typeSeparator,v=c.descriptionSeparator,S=c.maxPadFactor,w=c.initialIndent,x=c.secondaryIndent,function(e){var d,m,I,N,T,F,P,b,k,q,z,A,H,L,$,j,U,Y,Z,_,C,D,E,J,M,O,R,B,G,K,Q,V;for(d=null!=e?e:{},m=d.showHidden,I=d.interpolate,N=null!=y&&y.isTTY?y.columns-1:null,T=[],F=function(n){return T.push(null!=n?n:"")},l&&(F(I?t(l,I):l),F()),P=[],b=0,k=0,q=[],z=0,A=(d=r).length;z<A;++z)H=d[z],!m&&H.hidden||((L=H.heading)?P.push({type:"heading",value:L}):($=g(H,c,N),j=[],null!=(L=H.description)&&j.push(L),(L=H.enum)&&j.push("either: "+h(L)),H.default&&!H.negateName&&j.push("default: "+H.default),U=j.join(" - "),P.push({type:"option",pre:$,desc:U,descLen:U.length}),Y=$.length,b++,k+=Y,q.push(Y)));for(Z=i(q),_=Z[Z.length-1],C=w+k/b,D=b>2?o(C*S,_):_,z=Z.length-1;z>=0;--z)if((Y=Z[z])<=D){E=Y;break}if(J=v.length,null!=N)for(M=0,O=0,z=0,A=P.length;z<A;++z)H=P[z],"option"===H.type&&($=H.pre,U=H.desc,R=H.descLen,0===R?H.wrap="none":(Y=u(E,$.length)+w+J,B=Y+R,B>N?R/2.5>N-Y?(M++,H.wrap="full"):(O++,H.wrap="partial"):H.wrap="none"));for(G=a(" ",w),K=b>1&&M+.5*O>.5*b,z=0,A=P.length;z<A;++z)if(Q=z,H=P[z],"heading"===H.type)0!==Q&&F(),F(H.value+":");else{if($=H.pre,U=H.desc,R=H.descLen,V=H.wrap,null!=N){if(K||"full"===V){V=f(w+x,N),F(G+""+$+"\n"+V(U));continue}if("partial"===V){V=f(w+J+u(E,$.length),N),F(G+""+n($,E)+v+V(U).replace(/^\s+/,""));continue}}F(0===R?G+""+$:G+""+n($,E)+v+U)}return p&&(F(),F(I?t(p,I):p)),s(T)}},module.exports={generateHelp:v,generateHelpForOption:y}}).call(this);