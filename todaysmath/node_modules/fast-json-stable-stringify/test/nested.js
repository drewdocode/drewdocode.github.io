var test=require("tape"),stringify=require("../");test("nested",function(t){t.plan(1);var a={c:8,b:[{z:6,y:5,x:4},7],a:3};t.equal(stringify(a),'{"a":3,"b":[{"x":4,"y":5,"z":6},7],"c":8}')}),test("cyclic (default)",function(t){t.plan(1);var a={a:1},e={a:2,one:a};a.two=e;try{stringify(a)}catch(a){t.equal(a.toString(),"TypeError: Converting circular structure to JSON")}}),test("cyclic (specifically allowed)",function(t){t.plan(1);var a={a:1},e={a:2,one:a};a.two=e,t.equal(stringify(a,{cycles:!0}),'{"a":1,"two":{"a":2,"one":"__cycle__"}}')}),test("repeated non-cyclic value",function(t){t.plan(1);var a={x:1},e={a:a,b:a};t.equal(stringify(e),'{"a":{"x":1},"b":{"x":1}}')}),test("acyclic but with reused obj-property pointers",function(t){t.plan(1);var a={a:1},e={b:a,c:a};t.equal(stringify(e),'{"b":{"a":1},"c":{"a":1}}')});