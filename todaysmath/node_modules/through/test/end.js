var test=require("tape"),through=require("../");test("end before close",function(e){var n=through(),u=!1,o=!1;n.on("end",function(){e.ok(!o),u=!0}),n.on("close",function(){e.ok(u),o=!0}),n.write(1),n.write(2),n.write(3),n.end(),e.ok(u),e.ok(o),e.end()}),test("end only once",function(e){var n=through(),u=!1;n.on("end",function(){e.equal(u,!1),u=!0}),n.queue(null),n.queue(null),n.queue(null),n.resume(),e.end()});