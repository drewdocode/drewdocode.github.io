module.exports=function(e,a,r){var s=" ",t=e.level,l=e.dataLevel,h=e.schema[a],o=e.schemaPath+e.util.getProperty(a),c=e.errSchemaPath+"/"+a,m=!e.opts.allErrors,i="data"+(l||""),v="valid"+t,u="errs__"+t,d=e.util.copy(e);d.level++;var n="valid"+d.level,P=e.schema.then,p=e.schema.else,E=void 0!==P&&e.util.schemaHasRules(P,e.RULES.all),f=void 0!==p&&e.util.schemaHasRules(p,e.RULES.all),R=d.baseId;if(E||f){var S;d.createErrors=!1,d.schema=h,d.schemaPath=o,d.errSchemaPath=c,s+=" var "+u+" = errors; var "+v+" = true;  ";var g=e.compositeRule;e.compositeRule=d.compositeRule=!0,s+="  "+e.validate(d)+" ",d.baseId=R,d.createErrors=!0,s+="  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; }  ",e.compositeRule=d.compositeRule=g,E?(s+=" if ("+n+") {  ",d.schema=e.schema.then,d.schemaPath=e.schemaPath+".then",d.errSchemaPath=e.errSchemaPath+"/then",s+="  "+e.validate(d)+" ",d.baseId=R,s+=" "+v+" = "+n+"; ",E&&f?(S="ifClause"+t,s+=" var "+S+" = 'then'; "):S="'then'",s+=" } ",f&&(s+=" else { ")):s+=" if (!"+n+") { ",f&&(d.schema=e.schema.else,d.schemaPath=e.schemaPath+".else",d.errSchemaPath=e.errSchemaPath+"/else",s+="  "+e.validate(d)+" ",d.baseId=R,s+=" "+v+" = "+n+"; ",E&&f?(S="ifClause"+t,s+=" var "+S+" = 'else'; "):S="'else'",s+=" } "),s+=" if (!"+v+") {   var err =   ",!1!==e.createErrors?(s+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { failingKeyword: "+S+" } ",!1!==e.opts.messages&&(s+=" , message: 'should match \"' + "+S+" + '\" schema' "),e.opts.verbose&&(s+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+i+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&m&&(e.async?s+=" throw new ValidationError(vErrors); ":s+=" validate.errors = vErrors; return false; "),s+=" }   ",m&&(s+=" else { "),s=e.util.cleanUpCode(s)}else m&&(s+=" if (true) { ");return s};