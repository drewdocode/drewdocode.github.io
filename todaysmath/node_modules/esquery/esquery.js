!function(){function e(){function e(e,r){var t,n=r.split(".");for(t=0;t<n.length;t++){if(null==e)return e;e=e[n[t]]}return e}function a(e,r,t){var u,i,s;if(0===t.length)return e===r;if(null==r)return!1;if(u=r[t[0]],i=t.slice(1),n(u)){for(s=0,l=u.length;s<l;++s)if(a(e,u[s],i))return!0;return!1}return a(e,u,i)}function s(r,t,n){var l,h,p,v,y;if(!t)return!0;if(!r)return!1;switch(n||(n=[]),t.type){case"wildcard":return!0;case"identifier":return t.value.toLowerCase()===r.type.toLowerCase();case"field":return l=t.name.split("."),h=n[l.length-1],a(r,h,l);case"matches":for(p=0,v=t.selectors.length;p<v;++p)if(s(r,t.selectors[p],n))return!0;return!1;case"compound":for(p=0,v=t.selectors.length;p<v;++p)if(!s(r,t.selectors[p],n))return!1;return!0;case"not":for(p=0,v=t.selectors.length;p<v;++p)if(s(r,t.selectors[p],n))return!1;return!0;case"child":return!!s(r,t.right,n)&&s(n[0],t.left,n.slice(1));case"descendant":if(s(r,t.right,n))for(p=0,v=n.length;p<v;++p)if(s(n[p],t.left,n.slice(p+1)))return!0;return!1;case"attribute":switch(y=e(r,t.name),t.operator){case null:case void 0:return null!=y;case"=":switch(t.value.type){case"regexp":return t.value.value.test(y);case"literal":return""+t.value.value==""+y;case"type":return t.value.value===typeof y}case"!=":switch(t.value.type){case"regexp":return!t.value.value.test(y);case"literal":return""+t.value.value!=""+y;case"type":return t.value.value!==typeof y}case"<=":return y<=t.value.value;case"<":return y<t.value.value;case">":return y>t.value.value;case">=":return y>=t.value.value}case"sibling":return s(r,t.right,n)&&c(r,t.left,n,u)||t.left.subject&&s(r,t.left,n)&&c(r,t.right,n,i);case"adjacent":return s(r,t.right,n)&&f(r,t.left,n,u)||t.right.subject&&s(r,t.left,n)&&f(r,t.right,n,i);case"nth-child":return s(r,t.right,n)&&o(r,n,function(e){return t.index.value-1});case"nth-last-child":return s(r,t.right,n)&&o(r,n,function(e){return e-t.index.value});case"class":if(!r.type)return!1;switch(t.name.toLowerCase()){case"statement":if("Statement"===r.type.slice(-9))return!0;case"declaration":return"Declaration"===r.type.slice(-11);case"pattern":if("Pattern"===r.type.slice(-7))return!0;case"expression":return"Expression"===r.type.slice(-10)||"Literal"===r.type||"Identifier"===r.type;case"function":return"Function"===r.type.slice(0,8)||"ArrowFunctionExpression"===r.type}throw new Error("Unknown class name: "+t.name)}throw new Error("Unknown selector type: "+t.type)}function c(e,t,i,a){var l,c,f,o,h,p,v,y,g=i[0];if(!g)return!1;for(f=r.VisitorKeys[g.type],o=0,h=f.length;o<h;++o)if(l=g[f[o]],n(l)){if((c=l.indexOf(e))<0)continue;for(a===u?(v=0,y=c):(v=c+1,y=l.length),p=v;p<y;++p)if(s(l[p],t,i))return!0}return!1}function f(e,t,a,l){var c,f,o,h,p,v=a[0];if(!v)return!1;for(f=r.VisitorKeys[v.type],o=0,h=f.length;o<h;++o)if(c=v[f[o]],n(c)){if((p=c.indexOf(e))<0)continue;if(l===u&&p>0&&s(c[p-1],t,a))return!0;if(l===i&&p<c.length-1&&s(c[p+1],t,a))return!0}return!1}function o(e,t,u){var i,a,s,l,c,f=t[0];if(!f)return!1;for(a=r.VisitorKeys[f.type],s=0,l=a.length;s<l;++s)if(i=f[a[s]],n(i)&&(c=i.indexOf(e))>=0&&c===u(i.length))return!0;return!1}function h(e,r){var t,n;if(null==e||"object"!=typeof e)return[];null==r&&(r=e),t=e.subject?[r]:[];for(n in e)({}).hasOwnProperty.call(e,n)&&[].push.apply(t,h(e[n],"left"===n?e[n]:r));return t}function p(e,t){var n,u,i,a,l,c=[],f=[];return t?(n=h(t),r.traverse(e,{enter:function(e,r){if(null!=r&&c.unshift(r),s(e,t,c))if(n.length)for(u=0,i=n.length;u<i;++u)for(s(e,n[u],c)&&f.push(e),a=0,l=c.length;a<l;++a)s(c[a],n[u],c.slice(a+1))&&f.push(c[a]);else f.push(e)},leave:function(){c.shift()}}),f):f}function v(e){return t.parse(e)}function y(e,r){return p(e,v(r))}return y.parse=v,y.match=p,y.matches=s,y.query=y}var r=require("estraverse"),t=require("./parser"),n=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},u={},i={};"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module&&module.exports?module.exports=e():this.esquery=e()}();