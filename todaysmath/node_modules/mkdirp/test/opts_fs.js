var mkdirp=require("../"),path=require("path"),test=require("tap").test,mockfs=require("mock-fs"),_0777=parseInt("0777",8),_0755=parseInt("0755",8);test("opts.fs",function(t){t.plan(5);var o=Math.floor(Math.random()*Math.pow(16,4)).toString(16),r=Math.floor(Math.random()*Math.pow(16,4)).toString(16),a=Math.floor(Math.random()*Math.pow(16,4)).toString(16),e="/beep/boop/"+[o,r,a].join("/"),i=mockfs.fs();mkdirp(e,{fs:i,mode:_0755},function(o){t.ifError(o),i.exists(e,function(o){t.ok(o,"created file"),i.stat(e,function(o,r){t.ifError(o),t.equal(r.mode&_0777,_0755),t.ok(r.isDirectory(),"target not a directory")})})})});