var mkdirp=require("../"),path=require("path"),fs=require("fs"),exists=fs.exists||path.exists,test=require("tap").test,_0777=parseInt("0777",8),_0755=parseInt("0755",8);test("umask sync modes",function(t){t.plan(4);var r=Math.floor(Math.random()*Math.pow(16,4)).toString(16),a=Math.floor(Math.random()*Math.pow(16,4)).toString(16),e=Math.floor(Math.random()*Math.pow(16,4)).toString(16),o="/tmp/"+[r,a,e].join("/");try{mkdirp.sync(o)}catch(r){return t.fail(r),t.end()}exists(o,function(r){t.ok(r,"file created"),fs.stat(o,function(r,a){t.ifError(r),t.equal(a.mode&_0777,_0777&~process.umask()),t.ok(a.isDirectory(),"target not a directory")})})});