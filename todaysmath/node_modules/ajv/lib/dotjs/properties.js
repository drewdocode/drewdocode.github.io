module.exports=function(r,e,a){var t=" ",s=r.level,o=r.dataLevel,i=r.schema[e],l=r.schemaPath+r.util.getProperty(e),h=r.errSchemaPath+"/"+e,p=!r.opts.allErrors,u="data"+(o||""),n="valid"+s,v="errs__"+s,c=r.util.copy(r),d="";c.level++;var P="valid"+c.level,m="key"+s,f="idx"+s,g=c.dataLevel=r.dataLevel+1,y="data"+g,E="dataProperties"+s,S=Object.keys(i||{}),b=r.schema.patternProperties||{},R=Object.keys(b),O=r.schema.additionalProperties,j=S.length||R.length,k=!1===O,w="object"==typeof O&&Object.keys(O).length,Q=r.opts.removeAdditional,x=k||w||Q,G=r.opts.ownProperties,A=r.baseId,_=r.schema.required;if(_&&(!r.opts.v5||!_.$data)&&_.length<r.opts.loopRequired)var q=r.util.toHash(_);if(r.opts.patternGroups)var D=r.schema.patternGroups||{},I=Object.keys(D);if(t+="var "+v+" = errors;var "+P+" = true;",G&&(t+=" var "+E+" = undefined;"),x){if(t+=G?" "+E+" = "+E+" || Object.keys("+u+"); for (var "+f+"=0; "+f+"<"+E+".length; "+f+"++) { var "+m+" = "+E+"["+f+"]; ":" for (var "+m+" in "+u+") { ",j){if(t+=" var isAdditional"+s+" = !(false ",S.length)if(S.length>5)t+=" || validate.schema"+l+"["+m+"] ";else{var L=S;if(L)for(var C,H=-1,U=L.length-1;H<U;)C=L[H+=1],t+=" || "+m+" == "+r.util.toQuotedString(C)+" "}if(R.length){var V=R;if(V)for(var F,N=-1,T=V.length-1;N<T;)F=V[N+=1],t+=" || "+r.usePattern(F)+".test("+m+") "}if(r.opts.patternGroups&&I.length){var $=I;if($)for(var z,N=-1,B=$.length-1;N<B;)z=$[N+=1],t+=" || "+r.usePattern(z)+".test("+m+") "}t+=" ); if (isAdditional"+s+") { "}if("all"==Q)t+=" delete "+u+"["+m+"]; ";else{var J=r.errorPath,K="' + "+m+" + '";if(r.opts._errorDataPathProperty&&(r.errorPath=r.util.getPathExpr(r.errorPath,m,r.opts.jsonPointers)),k)if(Q)t+=" delete "+u+"["+m+"]; ";else{t+=" "+P+" = false; ";var M=h;h=r.errSchemaPath+"/additionalProperties";var W=W||[];W.push(t),t="",!1!==r.createErrors?(t+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(h)+" , params: { additionalProperty: '"+K+"' } ",!1!==r.opts.messages&&(t+=" , message: 'should NOT have additional properties' "),r.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+r.schemaPath+" , data: "+u+" "),t+=" } "):t+=" {} ";var X=t;t=W.pop(),!r.compositeRule&&p?r.async?t+=" throw new ValidationError(["+X+"]); ":t+=" validate.errors = ["+X+"]; return false; ":t+=" var err = "+X+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h=M,p&&(t+=" break; ")}else if(w)if("failing"==Q){t+=" var "+v+" = errors;  ";var Y=r.compositeRule;r.compositeRule=c.compositeRule=!0,c.schema=O,c.schemaPath=r.schemaPath+".additionalProperties",c.errSchemaPath=r.errSchemaPath+"/additionalProperties",c.errorPath=r.opts._errorDataPathProperty?r.errorPath:r.util.getPathExpr(r.errorPath,m,r.opts.jsonPointers);var Z=u+"["+m+"]";c.dataPathArr[g]=m;var rr=r.validate(c);c.baseId=A,r.util.varOccurences(rr,y)<2?t+=" "+r.util.varReplace(rr,y,Z)+" ":t+=" var "+y+" = "+Z+"; "+rr+" ",t+=" if (!"+P+") { errors = "+v+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+u+"["+m+"]; }  ",r.compositeRule=c.compositeRule=Y}else{c.schema=O,c.schemaPath=r.schemaPath+".additionalProperties",c.errSchemaPath=r.errSchemaPath+"/additionalProperties",c.errorPath=r.opts._errorDataPathProperty?r.errorPath:r.util.getPathExpr(r.errorPath,m,r.opts.jsonPointers);var Z=u+"["+m+"]";c.dataPathArr[g]=m;var rr=r.validate(c);c.baseId=A,r.util.varOccurences(rr,y)<2?t+=" "+r.util.varReplace(rr,y,Z)+" ":t+=" var "+y+" = "+Z+"; "+rr+" ",p&&(t+=" if (!"+P+") break; ")}r.errorPath=J}j&&(t+=" } "),t+=" }  ",p&&(t+=" if ("+P+") { ",d+="}")}var er=r.opts.useDefaults&&!r.compositeRule;if(S.length){var ar=S;if(ar)for(var C,tr=-1,sr=ar.length-1;tr<sr;){C=ar[tr+=1];var or=i[C];if(r.util.schemaHasRules(or,r.RULES.all)){var ir=r.util.getProperty(C),Z=u+ir,lr=er&&void 0!==or.default;c.schema=or,c.schemaPath=l+ir,c.errSchemaPath=h+"/"+r.util.escapeFragment(C),c.errorPath=r.util.getPath(r.errorPath,C,r.opts.jsonPointers),c.dataPathArr[g]=r.util.toQuotedString(C);var rr=r.validate(c);if(c.baseId=A,r.util.varOccurences(rr,y)<2){rr=r.util.varReplace(rr,y,Z);var hr=Z}else{var hr=y;t+=" var "+y+" = "+Z+"; "}if(lr)t+=" "+rr+" ";else{if(q&&q[C]){t+=" if ( "+hr+" === undefined ",G&&(t+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+r.util.escapeQuotes(C)+"') "),t+=") { "+P+" = false; ";var J=r.errorPath,M=h,pr=r.util.escapeQuotes(C);r.opts._errorDataPathProperty&&(r.errorPath=r.util.getPath(J,C,r.opts.jsonPointers)),h=r.errSchemaPath+"/required";var W=W||[];W.push(t),t="",!1!==r.createErrors?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(h)+" , params: { missingProperty: '"+pr+"' } ",!1!==r.opts.messages&&(t+=" , message: '",r.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+pr+"\\'",t+="' "),r.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+u+" "),t+=" } "):t+=" {} ";var X=t;t=W.pop(),!r.compositeRule&&p?r.async?t+=" throw new ValidationError(["+X+"]); ":t+=" validate.errors = ["+X+"]; return false; ":t+=" var err = "+X+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h=M,r.errorPath=J,t+=" } else { "}else p?(t+=" if ( "+hr+" === undefined ",G&&(t+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+r.util.escapeQuotes(C)+"') "),t+=") { "+P+" = true; } else { "):(t+=" if ("+hr+" !== undefined ",G&&(t+=" &&   Object.prototype.hasOwnProperty.call("+u+", '"+r.util.escapeQuotes(C)+"') "),t+=" ) { ");t+=" "+rr+" } "}}p&&(t+=" if ("+P+") { ",d+="}")}}if(R.length){var ur=R;if(ur)for(var F,nr=-1,vr=ur.length-1;nr<vr;){F=ur[nr+=1];var or=b[F];if(r.util.schemaHasRules(or,r.RULES.all)){c.schema=or,c.schemaPath=r.schemaPath+".patternProperties"+r.util.getProperty(F),c.errSchemaPath=r.errSchemaPath+"/patternProperties/"+r.util.escapeFragment(F),t+=G?" "+E+" = "+E+" || Object.keys("+u+"); for (var "+f+"=0; "+f+"<"+E+".length; "+f+"++) { var "+m+" = "+E+"["+f+"]; ":" for (var "+m+" in "+u+") { ",t+=" if ("+r.usePattern(F)+".test("+m+")) { ",c.errorPath=r.util.getPathExpr(r.errorPath,m,r.opts.jsonPointers);var Z=u+"["+m+"]";c.dataPathArr[g]=m;var rr=r.validate(c);c.baseId=A,r.util.varOccurences(rr,y)<2?t+=" "+r.util.varReplace(rr,y,Z)+" ":t+=" var "+y+" = "+Z+"; "+rr+" ",p&&(t+=" if (!"+P+") break; "),t+=" } ",p&&(t+=" else "+P+" = true; "),t+=" }  ",p&&(t+=" if ("+P+") { ",d+="}")}}}if(r.opts.patternGroups&&I.length){var cr=I;if(cr)for(var z,dr=-1,Pr=cr.length-1;dr<Pr;){z=cr[dr+=1];var mr=D[z],or=mr.schema;if(r.util.schemaHasRules(or,r.RULES.all)){c.schema=or,c.schemaPath=r.schemaPath+".patternGroups"+r.util.getProperty(z)+".schema",c.errSchemaPath=r.errSchemaPath+"/patternGroups/"+r.util.escapeFragment(z)+"/schema",t+=" var pgPropCount"+s+" = 0;  ",t+=G?" "+E+" = "+E+" || Object.keys("+u+"); for (var "+f+"=0; "+f+"<"+E+".length; "+f+"++) { var "+m+" = "+E+"["+f+"]; ":" for (var "+m+" in "+u+") { ",t+=" if ("+r.usePattern(z)+".test("+m+")) { pgPropCount"+s+"++; ",c.errorPath=r.util.getPathExpr(r.errorPath,m,r.opts.jsonPointers);var Z=u+"["+m+"]";c.dataPathArr[g]=m;var rr=r.validate(c);c.baseId=A,r.util.varOccurences(rr,y)<2?t+=" "+r.util.varReplace(rr,y,Z)+" ":t+=" var "+y+" = "+Z+"; "+rr+" ",p&&(t+=" if (!"+P+") break; "),t+=" } ",p&&(t+=" else "+P+" = true; "),t+=" }  ",p&&(t+=" if ("+P+") { ",d+="}");var fr=mr.minimum,gr=mr.maximum;if(void 0!==fr||void 0!==gr){t+=" var "+n+" = true; ";var M=h;if(void 0!==fr){var yr=fr,Er="minimum",Sr="less";t+=" "+n+" = pgPropCount"+s+" >= "+fr+"; ",h=r.errSchemaPath+"/patternGroups/minimum",t+="  if (!"+n+") {   ";var W=W||[];W.push(t),t="",!1!==r.createErrors?(t+=" { keyword: 'patternGroups' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(h)+" , params: { reason: '"+Er+"', limit: "+yr+", pattern: '"+r.util.escapeQuotes(z)+"' } ",!1!==r.opts.messages&&(t+=" , message: 'should NOT have "+Sr+" than "+yr+' properties matching pattern "'+r.util.escapeQuotes(z)+"\"' "),r.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+u+" "),t+=" } "):t+=" {} ";var X=t;t=W.pop(),!r.compositeRule&&p?r.async?t+=" throw new ValidationError(["+X+"]); ":t+=" validate.errors = ["+X+"]; return false; ":t+=" var err = "+X+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",void 0!==gr&&(t+=" else ")}if(void 0!==gr){var yr=gr,Er="maximum",Sr="more";t+=" "+n+" = pgPropCount"+s+" <= "+gr+"; ",h=r.errSchemaPath+"/patternGroups/maximum",t+="  if (!"+n+") {   ";var W=W||[];W.push(t),t="",!1!==r.createErrors?(t+=" { keyword: 'patternGroups' , dataPath: (dataPath || '') + "+r.errorPath+" , schemaPath: "+r.util.toQuotedString(h)+" , params: { reason: '"+Er+"', limit: "+yr+", pattern: '"+r.util.escapeQuotes(z)+"' } ",!1!==r.opts.messages&&(t+=" , message: 'should NOT have "+Sr+" than "+yr+' properties matching pattern "'+r.util.escapeQuotes(z)+"\"' "),r.opts.verbose&&(t+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+r.schemaPath+" , data: "+u+" "),t+=" } "):t+=" {} ";var X=t;t=W.pop(),!r.compositeRule&&p?r.async?t+=" throw new ValidationError(["+X+"]); ":t+=" validate.errors = ["+X+"]; return false; ":t+=" var err = "+X+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } "}h=M,p&&(t+=" if ("+n+") { ",d+="}")}}}}return p&&(t+=" "+d+" if ("+v+" == errors) {"),t=r.util.cleanUpCode(t)};