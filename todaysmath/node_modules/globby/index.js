function isNegative(e){return"!"===e[0]}function generateGlobTasks(e,r){var n=[];return e=arrify(e),r=objectAssign({cache:Object.create(null),statCache:Object.create(null),realpathCache:Object.create(null),symlinks:Object.create(null),ignore:[]},r),e.forEach(function(t,i){if(!isNegative(t)){var a=e.slice(i).filter(isNegative).map(function(e){return e.slice(1)});n.push({pattern:t,opts:objectAssign({},r,{ignore:r.ignore.concat(a)})})}}),n}var Promise=require("pinkie-promise"),arrayUnion=require("array-union"),objectAssign=require("object-assign"),glob=require("glob"),arrify=require("arrify"),pify=require("pify"),globP=pify(glob,Promise).bind(glob);module.exports=function(e,r){var n=generateGlobTasks(e,r);return Promise.all(n.map(function(e){return globP(e.pattern,e.opts)})).then(function(e){return arrayUnion.apply(null,e)})},module.exports.sync=function(e,r){return generateGlobTasks(e,r).reduce(function(e,r){return arrayUnion(e,glob.sync(r.pattern,r.opts))},[])},module.exports.generateGlobTasks=generateGlobTasks;